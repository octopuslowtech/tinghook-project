import{c as z,a as c,f as S}from"../chunks/BIHYj5q8.js";import{o as kt}from"../chunks/C1N3qTNx.js";import{f as b,p as Nt,q as P,a3 as ot,w,s as r,k as t,o as Mt,c as o,v as rt,r as a,t as st}from"../chunks/CNB1M18W.js";import{s as F}from"../chunks/YAzIAqS4.js";import{i as V}from"../chunks/Ny0y5trL.js";import{I as j,s as C,e as Pt,i as Ft}from"../chunks/AC_Dnq90.js";import{d as zt}from"../chunks/BovVG3Uo.js";import{a as St,b as nt,s as At}from"../chunks/DtRFns2F.js";import"../chunks/BO5QB-9v.js";import{l as I,s as q}from"../chunks/u9c0W3Mj.js";import{M as Dt}from"../chunks/Xd4_TOE2.js";function Lt(v,n){const l=I(n,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e=[["path",{d:"M17 7 7 17"}],["path",{d:"M17 17H7V7"}]];j(v,q({name:"arrow-down-left"},()=>l,{get iconNode(){return e},children:(d,m)=>{var s=z(),p=b(s);C(p,n,"default",{}),c(d,s)},$$slots:{default:!0}}))}function jt(v,n){const l=I(n,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e=[["path",{d:"M7 7h10v10"}],["path",{d:"M7 17 17 7"}]];j(v,q({name:"arrow-up-right"},()=>l,{get iconNode(){return e},children:(d,m)=>{var s=z(),p=b(s);C(p,n,"default",{}),c(d,s)},$$slots:{default:!0}}))}function Ct(v,n){const l=I(n,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e=[["path",{d:"m15 18-6-6 6-6"}]];j(v,q({name:"chevron-left"},()=>l,{get iconNode(){return e},children:(d,m)=>{var s=z(),p=b(s);C(p,n,"default",{}),c(d,s)},$$slots:{default:!0}}))}function It(v,n){const l=I(n,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e=[["path",{d:"m9 18 6-6-6-6"}]];j(v,q({name:"chevron-right"},()=>l,{get iconNode(){return e},children:(d,m)=>{var s=z(),p=b(s);C(p,n,"default",{}),c(d,s)},$$slots:{default:!0}}))}function qt(v,n){const l=I(n,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];j(v,q({name:"filter"},()=>l,{get iconNode(){return e},children:(d,m)=>{var s=z(),p=b(s);C(p,n,"default",{}),c(d,s)},$$slots:{default:!0}}))}var Tt=S('<div class="flex gap-4 p-4 mb-6 bg-white rounded-lg shadow"><select class="px-3 py-2 border rounded-lg"><option>All Directions</option><option>Inbound</option><option>Outbound</option></select> <select class="px-3 py-2 border rounded-lg"><option>All Status</option><option>Pending</option><option>Sent</option><option>Delivered</option><option>Failed</option></select></div>'),Ht=S('<div class="flex items-center justify-center py-12"><div class="w-8 h-8 border-4 border-blue-500 rounded-full border-t-transparent animate-spin"></div></div>'),Ot=S('<div class="py-12 text-center text-gray-500"><!> <p>No message logs found</p></div>'),Vt=S('<tr class="hover:bg-gray-50"><td class="px-6 py-4"><!></td><td class="px-6 py-4 font-mono text-sm"> </td><td class="max-w-md px-6 py-4 text-sm text-gray-600 truncate"> </td><td class="px-6 py-4"><span> </span></td><td class="px-6 py-4 text-sm text-gray-500"> </td></tr>'),Bt=S('<table class="w-full"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Direction</th><th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">From/To</th><th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Content</th><th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Status</th><th class="px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase">Time</th></tr></thead><tbody class="divide-y"></tbody></table> <div class="flex items-center justify-between px-6 py-4 border-t"><span class="text-sm text-gray-600"> </span> <div class="flex items-center gap-2"><button class="p-2 border rounded disabled:opacity-50"><!></button> <span class="px-4 py-2"> </span> <button class="p-2 border rounded disabled:opacity-50"><!></button></div></div>',1),Et=S('<div class="flex items-center justify-between mb-6"><h1 class="text-2xl font-bold">Message Logs</h1> <button class="flex items-center gap-2 px-4 py-2 border rounded-lg hover:bg-gray-50"><!> Filters</button></div> <!> <div class="overflow-hidden bg-white rounded-lg shadow"><!></div>',1);function ee(v,n){Nt(n,!0);let l=P(ot([])),e=P(ot({total:0,page:1,limit:20,total_pages:0})),d=P(!0),m=P(""),s=P(""),p=P(!1);kt(()=>T());async function T(){w(d,!0);try{const i=await St.getLogs({page:t(e).page,limit:t(e).limit,direction:t(m)||void 0,status:t(s)||void 0});w(l,i.data,!0),w(e,{...t(e),total:i.total,total_pages:i.total_pages},!0)}catch(i){console.error("Failed to fetch logs:",i)}w(d,!1)}function it(){t(e).page<t(e).total_pages&&(t(e).page++,T())}function lt(){t(e).page>1&&(t(e).page--,T())}function Y(){t(e).page=1,T()}var Z=Et(),B=b(Z),E=r(o(B),2);E.__click=()=>w(p,!t(p));var dt=o(E);qt(dt,{class:"w-4 h-4"}),rt(),a(E),a(B);var tt=r(B,2);{var pt=i=>{var x=Tt(),y=o(x);y.__change=Y;var A=o(y);A.value=A.__value="";var D=r(A);D.value=D.__value="inbound";var g=r(D);g.value=g.__value="outbound",a(y);var u=r(y,2);u.__change=Y;var f=o(u);f.value=f.__value="";var k=r(f);k.value=k.__value="pending";var N=r(k);N.value=N.__value="sent";var $=r(N);$.value=$.__value="delivered";var H=r($);H.value=H.__value="failed",a(u),a(x),nt(y,()=>t(m),M=>w(m,M)),nt(u,()=>t(s),M=>w(s,M)),c(i,x)};V(tt,i=>{t(p)&&i(pt)})}var et=r(tt,2),ct=o(et);{var vt=i=>{var x=Ht();c(i,x)},ut=i=>{var x=z(),y=b(x);{var A=g=>{var u=Ot(),f=o(u);Dt(f,{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),rt(2),a(u),c(g,u)},D=g=>{var u=Bt(),f=b(u),k=r(o(f));Pt(k,21,()=>t(l),Ft,(J,_)=>{var K=Vt(),Q=o(K),mt=o(Q);{var xt=h=>{Lt(h,{class:"w-5 h-5 text-green-500"})},ht=h=>{jt(h,{class:"w-5 h-5 text-blue-500"})};V(mt,h=>{t(_).direction==="inbound"?h(xt):h(ht,!1)})}a(Q);var R=r(Q),bt=o(R,!0);a(R);var U=r(R),yt=o(U,!0);a(U);var W=r(U),X=o(W),$t=o(X,!0);a(X),a(W);var at=r(W),wt=o(at,!0);a(at),a(K),st(h=>{F(bt,t(_).direction==="inbound"?t(_).sender:t(_).receiver),F(yt,t(_).content),At(X,1,`px-2 py-1 text-xs rounded-full ${t(_).status==="sent"?"bg-green-100 text-green-700":t(_).status==="failed"?"bg-red-100 text-red-700":t(_).status==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`),F($t,t(_).status),F(wt,h)},[()=>new Date(t(_).created_at).toLocaleString()]),c(J,K)}),a(k),a(f);var N=r(f,2),$=o(N),H=o($);a($);var M=r($,2),L=o(M);L.__click=lt;var _t=o(L);Ct(_t,{class:"w-4 h-4"}),a(L);var G=r(L,2),gt=o(G);a(G);var O=r(G,2);O.__click=it;var ft=o(O);It(ft,{class:"w-4 h-4"}),a(O),a(M),a(N),st(J=>{F(H,`Showing ${(t(e).page-1)*t(e).limit+1} to ${J??""} of ${t(e).total??""}`),L.disabled=t(e).page===1,F(gt,`${t(e).page??""} / ${t(e).total_pages??""}`),O.disabled=t(e).page===t(e).total_pages},[()=>Math.min(t(e).page*t(e).limit,t(e).total)]),c(g,u)};V(y,g=>{t(l).length===0?g(A):g(D,!1)},!0)}c(i,x)};V(ct,i=>{t(d)?i(vt):i(ut,!1)})}a(et),c(v,Z),Mt()}zt(["click","change"]);export{ee as component};
