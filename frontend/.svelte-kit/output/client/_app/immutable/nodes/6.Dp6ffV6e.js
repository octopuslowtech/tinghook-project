import{c as Q,a as l,f as g}from"../chunks/BIHYj5q8.js";import{o as Fe,a as Le}from"../chunks/C1N3qTNx.js";import{f as z,p as Se,q as D,a3 as qe,o as Be,s as o,c as a,v as ne,r as t,k as r,w as i,t as K}from"../chunks/CNB1M18W.js";import{s as E}from"../chunks/YAzIAqS4.js";import{i as P}from"../chunks/Ny0y5trL.js";import{I as ce,s as ue,e as le,i as Je}from"../chunks/AC_Dnq90.js";import{a as O,s as de,r as Xe}from"../chunks/DtRFns2F.js";import{d as Ge}from"../chunks/BovVG3Uo.js";import{b as He}from"../chunks/Du-1FX4s.js";import{P as Ke,a as Oe,T as Qe,X as Re}from"../chunks/MMhnirwg.js";import{S as ve}from"../chunks/BP0Atx3p.js";import"../chunks/BO5QB-9v.js";import{l as fe,s as ge}from"../chunks/u9c0W3Mj.js";function Ue(I,x){const h=fe(x,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13"}]];ce(I,ge({name:"battery"},()=>h,{get iconNode(){return $},children:(c,m)=>{var n=Q(),u=z(n);ue(u,x,"default",{}),l(c,n)},$$slots:{default:!0}}))}function Ve(I,x){const h=fe(x,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M20 6 9 17l-5-5"}]];ce(I,ge({name:"check"},()=>h,{get iconNode(){return $},children:(c,m)=>{var n=Q(),u=z(n);ue(u,x,"default",{}),l(c,n)},$$slots:{default:!0}}))}var We=g('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4"> </div>'),Ye=g('<div class="bg-white rounded-lg shadow p-6 animate-pulse"><div class="flex items-center gap-4"><div class="w-10 h-10 bg-gray-200 rounded"></div> <div class="flex-1"><div class="h-4 bg-gray-200 rounded w-32 mb-2"></div> <div class="h-3 bg-gray-200 rounded w-48"></div></div></div></div>'),Ze=g('<div class="space-y-4"></div>'),et=g('<div class="bg-white rounded-lg shadow p-12 text-center"><!> <h3 class="text-lg font-semibold mb-2">No devices connected</h3> <p class="text-gray-500 mb-4">Connect your first Android device to get started.</p> <a href="/devices/pair" class="text-blue-600 hover:underline">Pair a device â†’</a></div>'),tt=g('<div class="flex items-center gap-2"><input type="text" class="border rounded px-2 py-1 text-sm w-full max-w-xs"/> <button class="p-1 text-green-600 hover:bg-green-50 rounded"><!></button> <button class="p-1 text-gray-600 hover:bg-gray-100 rounded"><!></button></div>'),at=g('<h3 class="font-semibold truncate"> </h3>'),rt=g('<div class="bg-white rounded-lg shadow p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center gap-4"><div class="flex items-center gap-4 flex-1 min-w-0"><div class="relative flex-shrink-0"><!> <div></div></div> <div class="flex-1 min-w-0"><!> <p class="text-sm text-gray-500 truncate"> </p> <p class="text-xs text-gray-400"> </p></div></div> <div class="flex items-center gap-4 sm:gap-6 flex-wrap"><div class="flex items-center gap-2 text-sm text-gray-600"><!> <span> </span></div> <span> </span> <div class="flex gap-2"><button class="p-2 hover:bg-gray-100 rounded" title="Edit device name"><!></button> <button class="p-2 hover:bg-gray-100 rounded text-red-500" title="Delete device"><!></button></div></div></div>'),st=g('<div class="grid gap-4"></div>'),ot=g('<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl p-6 max-w-sm w-full"><h3 class="text-lg font-semibold mb-2">Delete Device</h3> <p class="text-gray-600 mb-4">Are you sure you want to delete this device? This action cannot be undone.</p> <div class="flex justify-end gap-3"><button class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">Cancel</button> <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Delete</button></div></div></div>'),it=g('<div class="flex flex-col gap-6 sm:flex-row sm:items-center sm:justify-between mb-6"><h1 class="text-2xl font-bold">Devices</h1> <a href="/devices/pair" class="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 transition-colors"><!> Add Device</a></div> <!> <!> <!>',1);function bt(I,x){Se(x,!0);let h=D(qe([])),$=D(!0),c=D(null),m=D(null),n=D(""),u=D(null),A;async function T(){try{i(h,await O.getDevices(),!0),i(c,null)}catch(e){i(c,e instanceof Error?e.message:"Failed to load devices",!0)}finally{i($,!1)}}Fe(()=>{T(),A=setInterval(T,1e4)}),Le(()=>{A&&clearInterval(A)});function pe(e){i(m,e.id,!0),i(n,e.name,!0)}async function R(){if(!(!r(m)||!r(n).trim())){try{await O.updateDevice(r(m),r(n).trim()),await T()}catch(e){i(c,e instanceof Error?e.message:"Failed to update device",!0)}i(m,null),i(n,"")}}function me(){i(m,null),i(n,"")}async function _e(){if(r(u)){try{await O.deleteDevice(r(u)),await T()}catch(e){i(c,e instanceof Error?e.message:"Failed to delete device",!0)}i(u,null)}}function xe(e){if(!e)return"Never";const s=new Date(e),b=new Date().getTime()-s.getTime(),d=Math.floor(b/6e4);if(d<1)return"Just now";if(d<60)return`${d}m ago`;const v=Math.floor(d/60);return v<24?`${v}h ago`:s.toLocaleDateString()}var U=it(),F=z(U),V=o(a(F),2),he=a(V);Ke(he,{class:"w-4 h-4"}),ne(),t(V),t(F);var W=o(F,2);{var be=e=>{var s=We(),p=a(s,!0);t(s),K(()=>E(p,r(c))),l(e,s)};P(W,e=>{r(c)&&e(be)})}var Y=o(W,2);{var ye=e=>{var s=Ze();le(s,20,()=>[1,2,3],Je,(p,b)=>{var d=Ye();l(p,d)}),t(s),l(e,s)},we=e=>{var s=Q(),p=z(s);{var b=v=>{var y=et(),N=a(y);ve(N,{class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),ne(6),t(y),l(v,y)},d=v=>{var y=st();le(y,21,()=>r(h),N=>N.id,(N,f)=>{var L=rt(),S=a(L),q=a(S),Z=a(q);ve(Z,{class:"w-10 h-10 text-gray-600"});var De=o(Z,2);t(q);var ee=o(q,2),te=a(ee);{var Ee=_=>{var w=tt(),k=a(w);Xe(k),k.__keydown=H=>H.key==="Enter"&&R();var M=o(k,2);M.__click=R;var ze=a(M);Ve(ze,{class:"w-4 h-4"}),t(M);var G=o(M,2);G.__click=me;var Ae=a(G);Re(Ae,{class:"w-4 h-4"}),t(G),t(w),He(k,()=>r(n),H=>i(n,H)),l(_,w)},Ie=_=>{var w=at(),k=a(w,!0);t(w),K(()=>E(k,r(f).name)),l(_,w)};P(te,_=>{r(m)===r(f).id?_(Ee):_(Ie,!1)})}var B=o(te,2),Ne=a(B,!0);t(B);var ae=o(B,2),Pe=a(ae);t(ae),t(ee),t(S);var re=o(S,2),J=a(re),se=a(J);Ue(se,{class:"w-4 h-4"});var oe=o(se,2),Te=a(oe);t(oe),t(J);var j=o(J,2),je=a(j,!0);t(j);var ie=o(j,2),C=a(ie);C.__click=()=>pe(r(f));var Ce=a(C);Oe(Ce,{class:"w-4 h-4"}),t(C);var X=o(C,2);X.__click=()=>i(u,r(f).id,!0);var Me=a(X);Qe(Me,{class:"w-4 h-4"}),t(X),t(ie),t(re),t(L),K(_=>{de(De,1,`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white ${r(f).status==="online"?"bg-green-500":"bg-gray-400"}`),E(Ne,r(f).device_uid),E(Pe,`Last seen: ${_??""}`),E(Te,`${r(f).battery_level??""}%`),de(j,1,`px-3 py-1 rounded-full text-sm ${r(f).status==="online"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`),E(je,r(f).status)},[()=>xe(r(f).last_seen_at)]),l(N,L)}),t(y),l(v,y)};P(p,v=>{r(h).length===0?v(b):v(d,!1)},!0)}l(e,s)};P(Y,e=>{r($)?e(ye):e(we,!1)})}var $e=o(Y,2);{var ke=e=>{var s=ot(),p=a(s),b=o(a(p),4),d=a(b);d.__click=()=>i(u,null);var v=o(d,2);v.__click=_e,t(b),t(p),t(s),l(e,s)};P($e,e=>{r(u)&&e(ke)})}l(I,U),Be()}Ge(["keydown","click"]);export{bt as component};
