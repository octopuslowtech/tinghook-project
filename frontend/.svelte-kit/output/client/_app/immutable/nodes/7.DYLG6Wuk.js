import{c as D,a as s,f as _}from"../chunks/BIHYj5q8.js";import{o as T}from"../chunks/C1N3qTNx.js";import{f as g,p as $,o as A,c as f,s as N,w as I,q as P,k as c,v as S,r as u,al as F}from"../chunks/CNB1M18W.js";import{i as C}from"../chunks/Ny0y5trL.js";import{a as O}from"../chunks/DtRFns2F.js";import{a as J}from"../chunks/Cc8-o5IQ.js";import{_ as V,b as Y}from"../chunks/DuLRHfiO.js";import{l as K,s as U,p as W}from"../chunks/u9c0W3Mj.js";import"../chunks/BO5QB-9v.js";import{I as X,s as Z}from"../chunks/AC_Dnq90.js";import{S as aa}from"../chunks/BP0Atx3p.js";import{C as ea}from"../chunks/D7PfyezA.js";function ta(v,t){const r=K(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];X(v,U({name:"arrow-left"},()=>r,{get iconNode(){return o},children:(i,e)=>{var n=D(),h=g(n);Z(h,t,"default",{}),s(i,n)},$$slots:{default:!0}}))}var ra=_("<canvas></canvas>");function oa(v,t){$(t,!0);let r=W(t,"size",3,200),o;T(async()=>{(await V(()=>import("../chunks/CTB2jwNe.js").then(n=>n.b),[],import.meta.url)).toCanvas(o,t.data,{width:r(),margin:2,color:{dark:"#000000",light:"#ffffff"}})});var i=ra();Y(i,e=>o=e,()=>o),s(v,i),A()}var sa=_('<div class="mx-auto h-64 w-64 animate-pulse rounded-lg bg-gray-100"></div>'),ia=_('<div class="mx-auto flex h-64 w-64 items-center justify-center rounded-lg bg-green-50"><!></div> <p class="mt-4 font-semibold text-green-600">Device paired successfully!</p>',1),na=_('<div class="inline-block rounded-lg border-2 border-gray-200 bg-white p-4"><!></div>'),la=_('<a href="/devices" class="mb-6 inline-flex items-center text-gray-600 hover:text-gray-900"><!> Back to Devices</a> <div class="mx-auto max-w-lg"><div class="rounded-lg bg-white p-8 text-center shadow"><!> <h1 class="mb-2 text-2xl font-bold">Pair Your Device</h1> <p class="mb-8 text-gray-600">Open the TingHook app on your Android device and scan this QR code.</p> <!> <div class="mt-8 rounded-lg bg-gray-50 p-4 text-left"><h3 class="mb-2 font-semibold">Instructions:</h3> <ol class="list-inside list-decimal space-y-2 text-sm text-gray-600"><li>Download TingHook from Google Play Store</li> <li>Open the app and tap "Connect"</li> <li>Scan the QR code above</li> <li>Grant SMS and Notification permissions</li></ol></div></div></div>',1);function ya(v,t){$(t,!0);let r=P(null),o=P(!0),i=P(!1),e=null;T(()=>{let a=null;return J.subscribe(m=>{a=m.user})(),O.getPairingToken().then(m=>{I(r,{api_key:(a==null?void 0:a.api_key)||"",server_url:"https://api.tinghook.io",pairing_token:m.token},!0),I(o,!1),n()}),()=>{e&&clearInterval(e)}});function n(){e=setInterval(async()=>{var a;try{(await O.checkPairingStatus(((a=c(r))==null?void 0:a.pairing_token)||"")).paired&&(I(i,!0),e&&clearInterval(e))}catch{}},3e3)}var h=la(),x=g(h),H=f(x);ta(H,{class:"mr-2 h-4 w-4"}),S(),u(x);var R=N(x,2),Q=f(R),z=f(Q);aa(z,{class:"mx-auto mb-4 h-16 w-16 text-blue-500"});var L=N(z,6);{var M=a=>{var l=sa();s(a,l)},E=a=>{var l=D(),m=g(l);{var G=d=>{var p=ia(),b=g(p),y=f(b);ea(y,{class:"h-24 w-24 text-green-500"}),u(b),S(2),s(d,p)},j=d=>{var p=D(),b=g(p);{var y=k=>{var w=na(),q=f(w);{let B=F(()=>JSON.stringify(c(r)));oa(q,{get data(){return c(B)},size:256})}u(w),s(k,w)};C(b,k=>{c(r)&&k(y)},!0)}s(d,p)};C(m,d=>{c(i)?d(G):d(j,!1)},!0)}s(a,l)};C(L,a=>{c(o)?a(M):a(E,!1)})}S(2),u(Q),u(R),s(v,h),A()}export{ya as component};
