import{c as O,a as o,f as c}from"../chunks/BIHYj5q8.js";import{o as ye}from"../chunks/C1N3qTNx.js";import{f as M,p as we,q as I,a3 as $e,s as v,o as Se,c as r,w as H,k as d,r as t,v as De,t as S,al as Me}from"../chunks/CNB1M18W.js";import{s as h}from"../chunks/YAzIAqS4.js";import{i as w}from"../chunks/Ny0y5trL.js";import{I as X,s as Y,e as Q,i as T}from"../chunks/AC_Dnq90.js";import{a as U,s as V}from"../chunks/DtRFns2F.js";import"../chunks/BO5QB-9v.js";import{l as Z,s as ee}from"../chunks/u9c0W3Mj.js";import{S as Ne}from"../chunks/BP0Atx3p.js";import{M as W}from"../chunks/Xd4_TOE2.js";import{C as je}from"../chunks/D7PfyezA.js";function Ae($,f){const p=Z(f,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]];X($,ee({name:"activity"},()=>p,{get iconNode(){return m},children:(g,b)=>{var x=O(),y=M(x);Y(y,f,"default",{}),o(g,x)},$$slots:{default:!0}}))}function ke($,f){const p=Z(f,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];X($,ee({name:"circle-x"},()=>p,{get iconNode(){return m},children:(g,b)=>{var x=O(),y=M(x);Y(y,f,"default",{}),o(g,x)},$$slots:{default:!0}}))}var Ce=c('<div class="animate-pulse"><div class="mb-2 h-4 w-24 rounded bg-gray-200"></div> <div class="h-8 w-16 rounded bg-gray-200"></div></div>'),Le=c('<div class="flex items-center justify-between"><div><p class="text-sm text-gray-500">Devices Online</p> <p class="text-3xl font-bold"> </p></div> <!></div>'),Pe=c('<div class="animate-pulse"><div class="mb-2 h-4 w-24 rounded bg-gray-200"></div> <div class="h-8 w-16 rounded bg-gray-200"></div></div>'),Re=c('<div class="flex items-center justify-between"><div><p class="text-sm text-gray-500">Messages Received</p> <p class="text-3xl font-bold"> </p></div> <!></div>'),qe=c('<div class="animate-pulse"><div class="mb-2 h-4 w-24 rounded bg-gray-200"></div> <div class="h-8 w-16 rounded bg-gray-200"></div></div>'),ze=c('<div class="flex items-center justify-between"><div><p class="text-sm text-gray-500">Messages Sent</p> <p class="text-3xl font-bold"> </p></div> <!></div>'),Fe=c('<div class="animate-pulse"><div class="mb-2 h-4 w-24 rounded bg-gray-200"></div> <div class="h-8 w-16 rounded bg-gray-200"></div></div>'),Ie=c('<div class="flex items-center justify-between"><div><p class="text-sm text-gray-500">Failed Messages</p> <p class="text-3xl font-bold"> </p></div> <!></div>'),He=c('<div class="flex items-center gap-4"><div class="h-10 w-10 rounded-full bg-gray-200"></div> <div class="flex-1"><div class="mb-2 h-4 w-48 rounded bg-gray-200"></div> <div class="h-3 w-32 rounded bg-gray-200"></div></div></div>'),Oe=c('<div class="animate-pulse space-y-4"></div>'),Be=c('<p class="py-8 text-center text-gray-500">No recent activity</p>'),Ee=c('<div class="flex items-center gap-4 rounded-lg border p-4"><div><!></div> <div class="flex-1"><p class="font-medium"> </p> <p class="text-sm text-gray-500"> </p></div> <span> </span></div>'),Ge=c('<div class="space-y-4"></div>'),Je=c('<h1 class="mb-6 text-2xl font-bold">Dashboard</h1> <div class="mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4"><div class="rounded-lg bg-white p-6 shadow"><!></div> <div class="rounded-lg bg-white p-6 shadow"><!></div> <div class="rounded-lg bg-white p-6 shadow"><!></div> <div class="rounded-lg bg-white p-6 shadow"><!></div></div> <div class="rounded-lg bg-white shadow"><div class="border-b p-6"><h2 class="flex items-center gap-2 text-lg font-semibold"><!> Recent Activity</h2></div> <div class="p-6"><!></div></div>',1);function sa($,f){we(f,!0);let p=I(null),m=I($e([])),g=I(!0);ye(async()=>{try{const[e,a]=await Promise.all([U.getDashboardStats(),U.getDevices()]),i=a.filter(l=>l.is_online).length;H(p,{total_devices:a.length,online_devices:i,total_inbound:e.total_inbound??0,total_outbound:e.total_outbound??0,total_sent:e.total_sent??0,total_failed:e.total_failed??0},!0),H(m,e.recent_activity??[],!0)}catch(e){console.error("Failed to load dashboard stats:",e)}finally{H(g,!1)}});function b(e){return e.toLocaleString()}function x(e){return new Date(e).toLocaleString()}var y=Je(),N=v(M(y),2),j=r(N),ae=r(j);{var te=e=>{var a=Ce();o(e,a)},se=e=>{var a=Le(),i=r(a),l=v(r(i),2),_=r(l);t(l),t(i);var n=v(i,2);Ne(n,{class:"h-12 w-12 text-blue-500"}),t(a),S((s,L)=>h(_,`${s??""} / ${L??""}`),[()=>{var s;return b(((s=d(p))==null?void 0:s.online_devices)??0)},()=>{var s;return b(((s=d(p))==null?void 0:s.total_devices)??0)}]),o(e,a)};w(ae,e=>{d(g)?e(te):e(se,!1)})}t(j);var A=v(j,2),re=r(A);{var de=e=>{var a=Pe();o(e,a)},ie=e=>{var a=Re(),i=r(a),l=v(r(i),2),_=r(l,!0);t(l),t(i);var n=v(i,2);W(n,{class:"h-12 w-12 text-green-500"}),t(a),S(s=>h(_,s),[()=>{var s;return b(((s=d(p))==null?void 0:s.total_inbound)??0)}]),o(e,a)};w(re,e=>{d(g)?e(de):e(ie,!1)})}t(A);var k=v(A,2),ve=r(k);{var oe=e=>{var a=qe();o(e,a)},le=e=>{var a=ze(),i=r(a),l=v(r(i),2),_=r(l,!0);t(l),t(i);var n=v(i,2);je(n,{class:"h-12 w-12 text-emerald-500"}),t(a),S(s=>h(_,s),[()=>{var s;return b(((s=d(p))==null?void 0:s.total_sent)??0)}]),o(e,a)};w(ve,e=>{d(g)?e(oe):e(le,!1)})}t(k);var B=v(k,2),ne=r(B);{var ce=e=>{var a=Fe();o(e,a)},_e=e=>{var a=Ie(),i=r(a),l=v(r(i),2),_=r(l,!0);t(l),t(i);var n=v(i,2);ke(n,{class:"h-12 w-12 text-red-500"}),t(a),S(s=>h(_,s),[()=>{var s;return b(((s=d(p))==null?void 0:s.total_failed)??0)}]),o(e,a)};w(ne,e=>{d(g)?e(ce):e(_e,!1)})}t(B),t(N);var E=v(N,2),C=r(E),G=r(C),pe=r(G);Ae(pe,{class:"h-5 w-5"}),De(),t(G),t(C);var J=v(C,2),ge=r(J);{var ue=e=>{var a=Oe();Q(a,20,()=>Array(5),T,(i,l)=>{var _=He();o(i,_)}),t(a),o(e,a)},fe=e=>{var a=O(),i=M(a);{var l=n=>{var s=Be();o(n,s)},_=n=>{var s=Ge();Q(s,21,()=>d(m),T,(L,u)=>{var P=Ee(),D=r(P),me=r(D);{let F=Me(()=>d(u).type==="inbound"?"text-green-600":"text-blue-600");W(me,{get class(){return`h-5 w-5 ${d(F)??""}`}})}t(D);var R=v(D,2),q=r(R),be=r(q);t(q);var K=v(q,2),xe=r(K);t(K),t(R);var z=v(R,2),he=r(z,!0);t(z),t(P),S(F=>{V(D,1,`flex h-10 w-10 items-center justify-center rounded-full ${d(u).type==="inbound"?"bg-green-100":"bg-blue-100"}`),h(be,`${d(u).type==="inbound"?"Received from":"Sent to"}
								${d(u).phone_number??""}`),h(xe,`${d(u).device_name??""} â€¢ ${F??""}`),V(z,1,`rounded-full px-2 py-1 text-xs ${d(u).status==="success"?"bg-green-100 text-green-800":d(u).status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`),h(he,d(u).status)},[()=>x(d(u).created_at)]),o(L,P)}),t(s),o(n,s)};w(i,n=>{d(m).length===0?n(l):n(_,!1)},!0)}o(e,a)};w(ge,e=>{d(g)?e(ue):e(fe,!1)})}t(J),t(E),o($,y),Se()}export{sa as component};
